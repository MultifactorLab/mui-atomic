<div class="row-container" [ngClass]="nestedLevelClass" [class.not-header-row]="!isHeaderRow">
  @if (canExpand && !isHeaderRow) {
    <mui-chevron-icon class="icon" [class.icon-rotated]="opened()"></mui-chevron-icon>
  }

  @for (cell of cells; track cell.id; let i = $index) {
    <mui-table-cell
      [ngStyle]="{ 'max-width.px': safeGetMaxWidth(i) }"
      [class.offset-row]="needsMoveFirstCell(i)"
      (click)="handleCellClick(cell)"
    >
      @if (TableCellLink.isBadgeCell(cell)) {
        <mui-badge [style]="cell.badgeStyle" [text]="cell.content!"></mui-badge>
      }

      @if (TableCellLink.isTextCell(cell)) {
        {{ cell.content }}
      }

      @if (TableCellLink.isSortCell(cell)) {
        <div class="mui-flex mui-gap-1 mui-align-items-center mui-justify-content-center">
          <span>{{ cell.content }}</span>

          @if (cell.sortDirection === 'none') {
            <div class="mui-flex mui-flex-column mui-align-items-center mui-justify-content-center">
              <mui-chevron-icon class="chevron-icon" [iconSize]="'S'"></mui-chevron-icon>
              <mui-chevron-icon class="chevron-icon chevron-icon-descending" [iconSize]="'S'"></mui-chevron-icon>
            </div>
          } @else {
            <mui-chevron-icon
              class="chevron-icon"
              [class.chevron-icon-descending]="cell.sortDirection === 'descending'"
              [iconSize]="'S'"
            ></mui-chevron-icon>
          }
        </div>
      }
    </mui-table-cell>
  }
</div>

@if (opened()) {
  <div class="nested-content-container">
    <ng-content></ng-content>
  </div>
}
